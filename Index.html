<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Weverse Web Project</title>
    <style>
        /* --- æ ¸å¿ƒæ¨£å¼ --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            background-color: #000; color: #fff; margin: 0; 
            font-family: -apple-system, sans-serif; overflow-x: hidden;
        }
        
        .view { display: none; min-height: 100vh; width: 100vw; }
        .active-view { display: block; }

        /* æ¨™é¡Œèˆ‡æ–‡å­— */
        .step-header { padding: 60px 25px 20px; }
        .step-header h1 { font-size: 24px; font-weight: bold; margin: 0; }
        .step-header p { color: #888; font-size: 14px; margin-top: 8px; }

        /* 1. å¡ç‰‡ç‰† (Grid) */
        .card-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 0 15px 150px; }
        .artist-card { 
            aspect-ratio: 1 / 1.25; border-radius: 20px; background-size: cover; background-position: center;
            position: relative; border: 2.5px solid transparent; transition: 0.2s; cursor: pointer;
        }
        .artist-card.selected { border-color: #fff; }
        .check-badge { 
            position: absolute; top: 10px; right: 10px; background: #fff; color: #000; 
            width: 20px; height: 20px; border-radius: 50%; text-align: center; 
            line-height: 20px; font-weight: bold; font-size: 11px; display: none;
        }
        .selected .check-badge { display: block; }
        .artist-card::after { 
            content: ''; position: absolute; bottom: 0; width: 100%; height: 40%; 
            background: linear-gradient(transparent, rgba(0,0,0,0.8)); border-radius: 0 0 20px 20px; 
        }
        .artist-name { position: absolute; bottom: 12px; left: 12px; font-weight: bold; z-index: 2; }

        /* 2. ä½¿ç”¨è€…è¨­å®š */
        .input-wrap { padding: 40px 20px; text-align: center; }
        .user-input { 
            width: 100%; padding: 18px; border-radius: 12px; border: 1px solid #333; 
            background: #111; color: #fff; font-size: 18px; text-align: center; outline: none;
        }

        /* 3. è€å±è‚¡é¦–é  */
        .home-nav { padding: 15px; text-align: center; font-weight: bold; border-bottom: 0.5px solid #222; font-size: 18px; }
        .avatar-bar { display: flex; padding: 15px; gap: 12px; overflow-x: auto; border-bottom: 0.5px solid #111; }
        .avatar-bar::-webkit-scrollbar { display: none; }
        .circle-wrap { text-align: center; flex-shrink: 0; width: 65px; cursor: pointer; }
        .circle { 
            width: 60px; height: 60px; border-radius: 50%; background: #222; 
            border: 1.2px solid #333; overflow: hidden; display: flex; 
            align-items: center; justify-content: center; margin-bottom: 5px;
        }
        .circle img { width: 100%; height: 100%; object-fit: cover; }
        .circle.plus { font-size: 22px; color: #fff; border: 1px dashed #444; }
        .circle-name { font-size: 10px; color: #999; }

        /* 4. æ˜Ÿçƒå…§éƒ¨ (Planet View) */
        .planet-header { 
            height: 200px; background-size: cover; background-position: center; 
            position: relative; display: flex; align-items: flex-end; padding: 20px;
        }
        .planet-header::before { 
            content: ''; position: absolute; top:0; left:0; width:100%; height:100%; 
            background: rgba(0,0,0,0.3); 
        }
        .back-btn { position: absolute; top: 40px; left: 20px; font-size: 30px; z-index: 10; cursor: pointer; }
        .planet-title { position: relative; font-size: 28px; font-weight: bold; z-index: 5; }
        .planet-tabs { display: flex; justify-content: space-around; padding: 15px; border-bottom: 0.5px solid #222; }
        .tab { color: #888; font-weight: bold; }
        .tab.active { color: #fff; border-bottom: 2px solid #fff; padding-bottom: 5px; }

        /* åº•éƒ¨å›ºå®šæŒ‰éˆ• */
        .footer { position: fixed; bottom: 0; width: 100%; padding: 20px; background: linear-gradient(transparent, #000 40%); z-index: 100; }
        .btn-main { 
            width: 100%; padding: 18px; border-radius: 35px; border: none; 
            background: #333; color: #666; font-weight: bold; font-size: 16px; 
        }
        .btn-main.ready { background: #fff; color: #000; cursor: pointer; }
        
        /* å°èˆªåˆ— */
        .nav-bar { position: fixed; bottom: 0; width: 100%; height: 70px; background: #000; display: flex; justify-content: space-around; align-items: center; border-top: 0.5px solid #222; }
    </style>
</head>
<body>

<div id="app">
    <section id="view-artist-select" class="view">
        <div class="step-header">
            <h1>é¸æ“‡æ„Ÿèˆˆè¶£çš„è—äºº</h1>
            <p>è«‹å¤šé¸å¹¾å€‹å–œæ­¡çš„ç¤¾ç¾¤å§ï¼</p>
        </div>
        <div class="card-grid" id="cardGrid"></div>
        <div class="footer">
            <button id="nextStepBtn" class="btn-main" onclick="toProfileStep()">ä¸‹ä¸€æ­¥</button>
        </div>
    </section>

    <section id="view-profile-setup" class="view">
        <div class="step-header">
            <h1>æœ€å¾Œä¸€æ­¥</h1>
            <p>è¨­å®šæ‚¨çš„ä½¿ç”¨è€…åç¨± (å…¨çƒé¡¯ç¤ºåç¨±)</p>
        </div>
        <div class="input-wrap">
            <input type="text" id="nameInput" class="user-input" placeholder="è«‹è¼¸å…¥åç¨±" maxlength="15">
        </div>
        <div class="footer">
            <button class="btn-main ready" onclick="completeJoin()">é€²å…¥ Weverse</button>
        </div>
    </section>

    <section id="view-home" class="view">
        <div class="home-nav">weverse</div>
        <div class="avatar-bar" id="avatarBar"></div>
        <main style="padding: 40px; text-align: center; color: #444;">
            <p id="welcomeUser"></p>
            <div style="margin-top: 50px;">ç›®å‰å°šç„¡ç¤¾ç¾¤å‹•æ…‹</div>
            <button onclick="clearAll()" style="background:none; border:1px solid #222; color:#333; padding:10px; border-radius:10px; margin-top:20px;">é‡ç½®è³‡æ–™ (å›æ­¸æ–°äºº)</button>
        </main>
        <nav class="nav-bar">
            <span>ğŸ </span><span>ğŸ’¬</span><span>ğŸ””</span><span>ğŸ‘¤</span>
        </nav>
    </section>

    <section id="view-planet" class="view">
        <div class="back-btn" onclick="backToHome()">â€¹</div>
        <div id="planetHeader" class="planet-header">
            <div id="planetName" class="planet-title"></div>
        </div>
        <div class="planet-tabs">
            <div class="tab active">Feed</div>
            <div class="tab">Artist</div>
            <div class="tab">Media</div>
        </div>
        <div style="padding: 50px; text-align: center; color: #555;">
            é€™è£¡é‚„æ²’æœ‰ä»»ä½•å‹•æ…‹...
        </div>
    </section>
</div>

<script>
    // --- è—äººè³‡æ–™åº« ---
    const ARTIST_LIST = [
        { id: 1, name: "BLACKPINK", img: "https://placehold.co/100x100/ff69b4/fff?text=BP", card: "https://placehold.co/400x500/ff69b4/fff?text=BLACKPINK" },
        { id: 2, name: "DREAMCATCHER", img: "https://placehold.co/100x100/4b0082/fff?text=DC", card: "https://placehold.co/400x500/4b0082/fff?text=DREAMCATCHER" },
        { id: 3, name: "BABYMONSTER", img: "https://placehold.co/100x100/ff0000/fff?text=BM", card: "https://placehold.co/400x500/ff0000/fff?text=BABYMONSTER" },
        { id: 4, name: "NCT DREAM", img: "https://placehold.co/100x100/adff2f/000?text=NCT", card: "https://placehold.co/400x500/adff2f/000?text=NCT+DREAM" }
    ];

    let tempSelected = []; // æš«å­˜é¸ä¸­çš„åœ˜é«”

    // --- é é¢æ§åˆ¶å™¨ ---
    function show(viewId) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active-view'));
        document.getElementById(viewId).classList.add('active-view');
    }

    // --- æµç¨‹ 1: æ¸²æŸ“å¡ç‰‡ç‰† ---
    function renderCards() {
        const grid = document.getElementById('cardGrid');
        grid.innerHTML = ARTIST_LIST.map(a => `
            <div class="artist-card ${tempSelected.includes(a.id) ? 'selected' : ''}" 
                 onclick="toggleSelect(${a.id})" 
                 style="background-image: url('${a.card}')">
                <div class="check-badge">âœ“</div>
                <div class="artist-name">${a.name}</div>
            </div>
        `).join('');
    }

    function toggleSelect(id) {
        const i = tempSelected.indexOf(id);
        if (i === -1) tempSelected.push(id);
        else tempSelected.splice(i, 1);
        
        const btn = document.getElementById('nextStepBtn');
        if (tempSelected.length > 0) {
            btn.classList.add('ready');
            btn.innerText = `åŠ å…¥ ${tempSelected.length} å€‹ç¤¾ç¾¤ï¼Œä¸‹ä¸€æ­¥`;
        } else {
            btn.classList.remove('ready');
            btn.innerText = "ä¸‹ä¸€æ­¥";
        }
        renderCards();
    }

    function toProfileStep() {
        if (tempSelected.length > 0) show('view-profile-setup');
    }

    // --- æµç¨‹ 2: è¨»å†Šå®Œæˆ ---
    function completeJoin() {
        const name = document.getElementById('nameInput').value.trim();
        if (!name) return alert("è«‹è¼¸å…¥åç¨±ï¼");
        
        localStorage.setItem("wv_user", name);
        const joined = ARTIST_LIST.filter(a => tempSelected.includes(a.id));
        localStorage.setItem("wv_groups", JSON.stringify(joined));
        
        startApp();
    }

    // --- æµç¨‹ 3: è€å±è‚¡é¦–é  ---
    function startApp() {
        const name = localStorage.getItem("wv_user");
        const groups = JSON.parse(localStorage.getItem("wv_groups") || "[]");
        
        if (!name) {
            show('view-artist-select');
            renderCards();
            return;
        }

        document.getElementById('welcomeUser').innerText = `ä½ å¥½ï¼Œ${name}ï¼`;
        const bar = document.getElementById('avatarBar');
        const plus = `<div class="circle-wrap"><div class="circle plus">+</div><div class="circle-name">æ–°å¢</div></div>`;
        const circles = groups.map(g => `
            <div class="circle-wrap" onclick="openPlanet(${g.id})">
                <div class="circle"><img src="${g.img}"></div>
                <div class="circle-name">${g.name}</div>
            </div>
        `).join('');
        
        bar.innerHTML = plus + circles;
        show('view-home');
    }

    // --- æµç¨‹ 4: é€²å…¥æ˜Ÿçƒé é¢ ---
    function openPlanet(id) {
        const artist = ARTIST_LIST.find(a => a.id === id);
        document.getElementById('planetName').innerText = artist.name;
        document.getElementById('planetHeader').style.backgroundImage = `url('${artist.card}')`;
        show('view-planet');
    }

    function backToHome() {
        show('view-home');
    }

    function clearAll() {
        localStorage.clear();
        location.reload();
    }

    window.onload = startApp;
</script>
</body>
</html>