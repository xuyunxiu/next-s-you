<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>NEXTâ€™S YOU | Artist Studio</title>
    <style>
        :root {
            --sky-blue: #D0EFFF;
            --lavender: #E6D5FF;
            --art-purple: #A29BFE;
            --glass: rgba(255, 255, 255, 0.4);
            --glass-border: rgba(255, 255, 255, 0.5);
            --text-main: #333;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { 
            margin: 0; font-family: "PingFang TC", "STHeiti", sans-serif;
            background: linear-gradient(160deg, var(--lavender) 0%, #FFFFFF 50%, var(--sky-blue) 100%);
            background-attachment: fixed; min-height: 100vh; color: var(--text-main); overflow-x: hidden;
        }

        /* --- 1. NEXTâ€™S YOU æµå…‰å•Ÿå‹•å‹•ç•« --- */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: linear-gradient(135deg, var(--sky-blue), var(--lavender));
            display: flex; align-items: center; justify-content: center; z-index: 99999;
            transition: opacity 0.6s ease;
        }
        .logo-main {
            font-size: 42px; font-weight: 900; letter-spacing: -1px; font-style: italic;
            background: linear-gradient(120deg, #fff 30%, #f0f0f0 50%, #fff 70%);
            background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: shine 1.5s linear infinite, logoPop 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes shine { to { background-position: 200% center; } }
        @keyframes logoPop { 0% { transform: scale(0.7); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        /* --- 2. ä¸»ç•«é¢ä½ˆå±€ --- */
        .studio-header { padding: 60px 25px 30px; }
        .studio-header h1 { margin: 0; font-size: 32px; font-weight: 900; color: #5a5a5a; letter-spacing: -1px; }
        .studio-header p { margin: 8px 0 0; color: #888; font-size: 16px; font-weight: 500; }

        .glass-panel {
            background: var(--glass); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border); border-radius: 32px; padding: 25px; margin: 0 20px 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.03);
        }

        .tool-btn {
            width: 100%; padding: 20px; border-radius: 22px; border: none; margin-bottom: 12px;
            font-size: 17px; font-weight: bold; cursor: pointer; color: #fff; transition: 0.3s;
            background: linear-gradient(45deg, #A29BFE, #6C5CE7);
            box-shadow: 0 10px 20px rgba(162, 155, 254, 0.25);
        }
        .tool-btn:active { transform: scale(0.98); opacity: 0.9; }

        /* --- 3. ä»¿åœ– 5 æ»¿ç‰ˆç™¼æ–‡ä»‹é¢ --- */
        #post-editor {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 20000; display: none; flex-direction: column;
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

        .editor-header { padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #f8f8f8; }
        .close-icon { font-size: 24px; color: #333; width: 45px; padding: 10px 0; }
        .post-title { font-weight: 900; font-style: italic; font-size: 20px; letter-spacing: 0.5px; }
        .post-action { color: var(--art-purple); font-weight: bold; font-size: 17px; width: 45px; text-align: right; }

        .editor-body { flex: 1; padding: 20px; }
        .editor-textarea { 
            width: 100%; height: 350px; border: none; font-size: 19px; 
            color: #333; resize: none; line-height: 1.6; font-family: inherit;
        }
        .editor-footer { padding: 20px 25px; display: flex; gap: 30px; border-top: 1px solid #f8f8f8; color: #bbb; font-size: 22px; }

        /* --- 4. è‡ªå®šç¾©æ¼‚äº®å½ˆçª— --- */
        .custom-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.4); backdrop-filter: blur(8px);
            display: none; align-items: center; justify-content: center; z-index: 30000;
        }
        .modal-content {
            background: #fff; width: 80%; max-width: 300px; border-radius: 28px;
            padding: 30px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.15);
            transform: scale(0.85); transition: 0.3s;
        }
        .modal-active .modal-content { transform: scale(1); }
        .modal-btn { 
            margin-top: 25px; width: 100%; padding: 14px; border-radius: 16px; 
            border: none; background: #222; color: #fff; font-weight: bold; font-size: 15px;
        }

        /* --- 5. ç™¼æ–‡ç´€éŒ„æ¨£å¼ --- */
        .history-item {
            background: rgba(255,255,255,0.5); padding: 18px; border-radius: 20px;
            margin-bottom: 15px; border: 1px solid rgba(255,255,255,0.8);
        }
        .history-text { font-size: 15px; line-height: 1.5; color: #444; }
        .history-time { font-size: 11px; color: #aaa; margin-top: 10px; display: block; }

        .logout-btn { background: none; border: 1px solid #ddd; padding: 10px 25px; border-radius: 15px; color: #bbb; font-size: 13px; margin-top: 20px; }
    </style>
</head>
<body>

    <div id="splash-screen">
        <div class="logo-main">NEXTâ€™S YOU</div>
    </div>

    <header class="studio-header">
        <h1>Artist Studio</h1>
        <p>æ­¡è¿å›ä¾†ï¼Œ<span id="display-name">ARTIST</span></p>
    </header>

    <div class="glass-panel">
        <h3 style="margin-top:0; font-size: 18px;">ğŸš€ å¿«é€Ÿå‰µä½œ</h3>
        <button class="tool-btn" onclick="openEditor()">âœï¸ æ’°å¯«æ–°å‹•æ…‹</button>
        <p style="font-size: 12px; color: #aaa; text-align: center;">è²¼æ–‡å°‡åŒæ­¥æ¨æ’­è‡³ç²‰çµ²æ˜Ÿçƒ</p>
    </div>

    <div class="glass-panel" id="history-section">
        <h3 style="margin-top:0; font-size: 18px;">ğŸ“œ æœ€è¿‘ç™¼å¸ƒ</h3>
        <div id="feed-history">
            <p style="color:#bbb; font-size:14px; text-align: center;">å°šç„¡ç™¼å¸ƒç´€éŒ„</p>
        </div>
    </div>

    <div style="text-align: center; margin-bottom: 60px;">
        <button class="logout-btn" onclick="logout()">å®‰å…¨ç™»å‡ºç³»çµ±</button>
    </div>

    <div id="post-editor">
        <div class="editor-header">
            <div class="close-icon" onclick="closeEditor()">âœ•</div>
            <div class="post-title">NEXTâ€™S YOU</div>
            <div class="post-action" onclick="submitPost()">è²¼æ–‡</div>
        </div>
        <div class="editor-body">
            <textarea id="postText" class="editor-textarea" placeholder="åœ¨æƒ³äº›ä»€éº¼ï¼Ÿ"></textarea>
        </div>
        <div class="editor-footer">
            <span>ğŸ–¼ï¸</span><span>ğŸ“·</span><span>ğŸ˜Š</span><span>ğŸ“</span>
        </div>
    </div>

    <div id="customAlert" class="custom-modal">
        <div class="modal-content">
            <p id="alertMsg" style="font-size:17px; font-weight:bold; color:#333;"></p>
            <button class="modal-btn" onclick="closeAlert()">çŸ¥é“äº†</button>
        </div>
    </div>

<script>
    // --- 1. å•Ÿå‹•èˆ‡æ¬Šé™æª¢æŸ¥ ---
    window.onload = () => {
        // å‹•ç•« 1.5 ç§’å¾Œæ¶ˆå¤±
        setTimeout(() => {
            const ss = document.getElementById('splash-screen');
            ss.style.opacity = '0';
            setTimeout(() => ss.style.display = 'none', 600);
        }, 1500);

        if (localStorage.getItem("user_role") !== 'artist') {
            window.location.href = 'index.html';
        }
        
        const userName = localStorage.getItem("user") || "ARTIST";
        document.getElementById('display-name').innerText = userName.toUpperCase();
        renderHistory();
    };

    // --- 2. ç™¼æ–‡ç·¨è¼¯å™¨æ§åˆ¶ ---
    function openEditor() {
        document.getElementById('post-editor').style.display = 'flex';
        document.getElementById('postText').focus();
    }

    function closeEditor() {
        document.getElementById('post-editor').style.display = 'none';
    }

    function submitPost() {
        const text = document.getElementById('postText').value;
        if (!text.trim()) {
            myAlert("è«‹è¼¸å…¥ä¸€äº›å…§å®¹å†è²¼æ–‡å§ï¼");
            return;
        }

        const currentUser = (localStorage.getItem("user") || "ARTIST").toUpperCase();
        let feeds = JSON.parse(localStorage.getItem("NEXTS_YOU_DATA") || "[]");
        
        const newPost = {
            id: Date.now(),
            artist: currentUser,
            text: text,
            time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
        };

        feeds.unshift(newPost);
        localStorage.setItem("NEXTS_YOU_DATA", JSON.stringify(feeds));

        myAlert("âœ¨ ç™¼å¸ƒæˆåŠŸï¼ç²‰çµ²å·²å¯æŸ¥é–±ã€‚");
        closeEditor();
        document.getElementById('postText').value = "";
        renderHistory();
    }

    // --- 3. è‡ªå®šç¾©å½ˆçª—é‚è¼¯ ---
    function myAlert(msg) {
        document.getElementById('alertMsg').innerText = msg;
        const m = document.getElementById('customAlert');
        m.style.display = 'flex';
        setTimeout(() => m.classList.add('modal-active'), 10);
    }

    function closeAlert() {
        const m = document.getElementById('customAlert');
        m.classList.remove('modal-active');
        setTimeout(() => m.style.display = 'none', 300);
    }

    // --- 4. æ¸²æŸ“æ­·å²ç´€éŒ„ ---
    function renderHistory() {
        const container = document.getElementById('feed-history');
        const feeds = JSON.parse(localStorage.getItem("NEXTS_YOU_DATA") || "[]");
        const currentUser = (localStorage.getItem("user") || "ARTIST").toUpperCase();
        
        const myFeeds = feeds.filter(f => f.artist === currentUser);

        if (myFeeds.length === 0) return;

        container.innerHTML = myFeeds.map(f => `
            <div class="history-item">
                <div class="history-text">${f.text}</div>
                <div class="history-time">${f.time} Â· å·²ç™¼å¸ƒ</div>
            </div>
        `).join('');
    }

    function logout() {
        localStorage.clear();
        window.location.href = 'index.html';
    }
</script>
</body>
</html>